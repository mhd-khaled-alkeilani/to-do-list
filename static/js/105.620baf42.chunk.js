"use strict";(self.webpackChunktodolist=self.webpackChunktodolist||[]).push([[105],{3105:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var l=t(5043),a=t(5472),i=t(791),r=t(5016),n=t(2972),o=t(7417),c=t(423),d=t(184),h=t(579);const u=e=>{let{count:s,titleHeader:t,type:a}=e;const{handleShowCreate:i,showCreate:r,date:o,setDate:u}=(0,n.U)(),[p,x]=(0,l.useState)(0),j=(0,l.useCallback)((()=>{x((e=>e+1))}),[]),m=(0,l.useCallback)((()=>{x((e=>e-1))}),[]);return(0,l.useEffect)((()=>{u((e=>new Date(Date.now()+24*p*60*60*1e3)))}),[p,u]),(0,h.jsxs)("div",{className:"section-header",children:[(0,h.jsx)("h1",{children:t}),"daily_tasks"===a||"completed_daily_tasks"===a?(0,h.jsxs)("div",{className:"date",children:[(0,h.jsx)("button",{onClick:m,children:(0,h.jsx)(d.QVr,{})}),o.toISOString().substring(0,10),(0,h.jsx)("button",{onClick:j,children:(0,h.jsx)(d.Z0P,{})})]}):null,(0,h.jsxs)("div",{className:"tools",children:[(0,h.jsx)("div",{className:"selections",children:(0,h.jsxs)("div",{className:"clear-select",children:["count tasks: ",s]})}),"all_tasks"===a||"daily_tasks"===a?(0,h.jsxs)("div",{children:[(0,h.jsx)("button",{onClick:i,children:(0,h.jsx)(c.TJ8,{})}),r?(0,h.jsx)(b,{}):null]}):null]})]})},p=e=>{let{children:s}=e;return(0,h.jsx)("div",{className:"sectoin-tasks",children:s})};var x=t(6720),j=t(3002),m=t(397);const y=e=>{let{completed:s,id:t,title:l,description:a,priority:i,date:o}=e;const{compleatedTask:c,deleteTask:u}=(0,r.A)(),{priorityFlagColor:p,handleShowEdit:y}=(0,n.U)(),k=(e,s)=>{window.confirm(s?"Do you want to return this task to your uncomplete tasks list?":"Did you complete this task?")&&c(e,s)};return(0,h.jsxs)("div",{className:"sectoin-task",children:[s?(0,h.jsx)(m.Ohx,{className:"task-completed",onClick:()=>k(t,s)}):(0,h.jsx)(d.Hcz,{className:"task-completed",onClick:()=>k(t,s)}),(0,h.jsxs)("div",{className:"wrapper-section-task",children:[(0,h.jsxs)("div",{className:"wrapper-task-content",children:[(0,h.jsxs)("div",{className:"task-content",children:[(0,h.jsx)("h3",{className:"task-title",children:l}),(0,h.jsx)("h4",{className:"task-description",children:a}),(0,h.jsx)("h4",{children:o})]}),(0,h.jsx)(j.PjS,{style:{color:p[i],width:"26px",height:"26px"}})]}),(0,h.jsxs)("div",{className:"task-option",children:[s?null:(0,h.jsx)("button",{className:"btn btn-primary",onClick:()=>y(t),children:"Edit"}),(0,h.jsx)("button",{className:"task-delete",onClick:()=>(e=>{window.confirm("Did you Delete this task?")&&u(e)})(t),children:(0,h.jsx)(x.b6i,{})})]})]})]})};var k=t(5284),A=t(3519),v=t(2462),g=t(1072),C=t(4282);const b=()=>{const{addTask:e}=(0,r.A)(),{showCreate:s,handleCloseCreate:t,priorityFlagColor:a}=(0,n.U)();var i=new Date;i.setDate(i.getDate());const o={title:"",description:"",priority:"urgent",date:i.toISOString().substring(0,10)},[c,d]=(0,l.useReducer)(((e,s)=>"input"===s.type?{...e,[s.field]:s.value}:e),o),u=e=>{d({type:"input",field:e.target.name,value:e.target.value})};return(0,h.jsxs)(k.A,{show:s,onHide:t,size:"lg",children:[(0,h.jsx)(k.A.Header,{closeButton:!0,children:(0,h.jsx)(k.A.Title,{children:"Create Task"})}),(0,h.jsx)(k.A.Body,{children:(0,h.jsx)(A.A,{children:(0,h.jsxs)(v.A,{onSubmit:async s=>{s.preventDefault(),await e(c),t()},children:[(0,h.jsxs)(g.A,{children:[(0,h.jsxs)("div",{className:"col-md-8 col-12",children:[(0,h.jsxs)(v.A.Group,{className:"mb-3",children:[(0,h.jsx)(v.A.Label,{htmlFor:"title_of_task",children:"Title of task"}),(0,h.jsx)(v.A.Control,{type:"text",name:"title",onChange:u,placeholder:"title",required:!0,autoFocus:!0})]}),(0,h.jsxs)(v.A.Group,{className:"mb-4",children:[(0,h.jsx)(v.A.Label,{htmlFor:"description_of_task",children:"Description of task"}),(0,h.jsx)(v.A.Control,{as:"textarea",name:"description",onChange:e=>u(e),rows:3})]}),(0,h.jsxs)(v.A.Group,{className:"mb-3",children:[(0,h.jsx)(v.A.Label,{htmlFor:"select_priority",children:"Select Priority"}),(0,h.jsxs)("div",{className:"select-priority",children:[(0,h.jsxs)(v.A.Select,{size:"sm",onChange:u,name:"priority",required:!0,children:[(0,h.jsx)("option",{value:"urgent",children:"urgent"}),(0,h.jsx)("option",{value:"high",children:"high"}),(0,h.jsx)("option",{value:"normal",children:"normal"}),(0,h.jsx)("option",{value:"low",children:"low"})]}),(0,h.jsx)("span",{children:(0,h.jsx)(j.PjS,{style:{color:a[c.priority]}})})]})]})]}),(0,h.jsx)("div",{className:"col-md-4 col-12",children:(0,h.jsxs)(v.A.Group,{className:"select-date mb-3",children:[(0,h.jsx)(v.A.Label,{htmlFor:"select_date",children:"Select Date:"}),(0,h.jsx)(v.A.Control,{type:"date",name:"date",onChange:u,required:!0,defaultValue:c.date})]})})]}),(0,h.jsxs)(k.A.Footer,{children:[(0,h.jsx)(C.A,{variant:"secondary",onClick:t,children:"Close"}),(0,h.jsx)(C.A,{variant:"primary",type:"submit",children:"Add"})]})]})})})]})},w=()=>{const{updateTask:e,getDataTask:s,loading:t}=(0,r.A)(),{id:a,showEdit:i,handleCloseEdit:o,priorityFlagColor:c}=(0,n.U)(),[d,u]=(0,l.useReducer)(((e,s)=>{switch(s.type){case"update":return{...e,[s.field]:s.value};case"setForm":return{...e,...s.payload};default:return e}}),{title:"",description:"",priority:"",date:""});(0,l.useEffect)((()=>{(async()=>{try{const e=await s(a);u({type:"setForm",payload:e.data()})}catch(e){console.error("Error fetching data:",e)}})()}),[a,s]);const p=e=>{u({type:"update",field:e.target.name,value:e.target.value})};return t?null:(0,h.jsxs)(k.A,{show:i,onHide:o,size:"lg",children:[(0,h.jsx)(k.A.Header,{closeButton:!0,children:(0,h.jsx)(k.A.Title,{children:"Edit Task"})}),(0,h.jsx)(k.A.Body,{children:(0,h.jsx)(A.A,{children:(0,h.jsxs)(v.A,{onSubmit:async s=>{s.preventDefault(),await e(a,d),o()},children:[(0,h.jsxs)(g.A,{children:[(0,h.jsxs)("div",{className:"col-md-8 col-12",children:[(0,h.jsxs)(v.A.Group,{className:"mb-3",children:[(0,h.jsx)(v.A.Label,{htmlFor:"title_of_task",children:"Title of task"}),(0,h.jsx)(v.A.Control,{type:"text",name:"title",placeholder:"title",required:!0,autoFocus:!0,value:d.title,onChange:p})]}),(0,h.jsxs)(v.A.Group,{className:"mb-4",children:[(0,h.jsx)(v.A.Label,{htmlFor:"description_of_task",children:"Description of task"}),(0,h.jsx)(v.A.Control,{as:"textarea",name:"description",rows:3,value:d.description,onChange:p})]}),(0,h.jsxs)(v.A.Group,{className:"mb-3",children:[(0,h.jsx)(v.A.Label,{htmlFor:"select_priority",children:"Select Priority"}),(0,h.jsxs)("div",{className:"select-priority",children:[(0,h.jsxs)(v.A.Select,{size:"sm",name:"priority",required:!0,value:d.priority,onChange:p,children:[(0,h.jsx)("option",{value:"urgent",children:"urgent"}),(0,h.jsx)("option",{value:"high",children:"high"}),(0,h.jsx)("option",{value:"normal",children:"normal"}),(0,h.jsx)("option",{value:"low",children:"low"})]}),(0,h.jsx)("span",{children:(0,h.jsx)(j.PjS,{style:{color:c[d.priority]}})})]})]})]}),(0,h.jsx)("div",{className:"col-md-4 col-12",children:(0,h.jsxs)(v.A.Group,{className:"select-date mb-3",children:[(0,h.jsx)(v.A.Label,{htmlFor:"select_date",children:"Select Date:"}),(0,h.jsx)(v.A.Control,{type:"date",name:"date",value:d.date,onChange:p,required:!0})]})})]}),(0,h.jsxs)(k.A.Footer,{children:[(0,h.jsx)(C.A,{variant:"secondary",onClick:o,children:"Close"}),(0,h.jsx)(C.A,{variant:"success",type:"submit",children:"Edit"})]})]})})})]})},N=e=>{let{type:s,title:t}=e;const{currentUser:c}=(0,r.A)(),{textSearch:d,showEdit:x,date:j,selectPriority:m,showAside:k}=(0,n.U)();console.log("main");const[A,v]=(0,l.useState)([]),[g,C]=(0,l.useState)(!0),[b,N]=(0,l.useState)(null),f=(0,l.useMemo)((()=>({position:"absolute",top:"50%",left:"60%"})),[]),_=(0,l.useCallback)((()=>{C(!0),N(null);const e=(0,a.rJ)(i.db,"users/".concat(c.uid,"/tasks")),t=[];"all_tasks"===s||"daily_tasks"===s?t.push((0,a._M)("completed","==",!1)):t.push((0,a._M)("completed","==",!0)),"daily_tasks"!==s&&"completed_daily_tasks"!==s||t.push((0,a._M)("date","==",j.toISOString().substring(0,10))),"all"!==m&&t.push((0,a._M)("priority","==",m));const l=(0,a.P)(e,...t);(0,a.GG)(l).then((e=>{v(e.docs.map((e=>({...e.data(),id:e.id}))))})).catch((e=>console.error(e))).finally((()=>{C(!1)}))}),[c,s,j,m]);(0,l.useEffect)((()=>{_(),C(!1)}),[_,s,k]);const S=(0,l.useMemo)((()=>A),[A]);return g?(0,h.jsx)(o.A,{style:f,animation:"border",variant:"primary"}):b?(0,h.jsx)("div",{className:"error-message",children:b}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u,{count:S.length,titleHeader:t,type:s}),(0,h.jsx)(p,{children:S.map((e=>(0,h.jsx)(y,{id:e.id,completed:e.completed,title:e.title,description:e.description,priority:e.priority,date:e.date},e.id)))}),x&&(0,h.jsx)(w,{})]})},f=l.memo(N)}}]);
//# sourceMappingURL=105.620baf42.chunk.js.map