"use strict";(self.webpackChunktodolist=self.webpackChunktodolist||[]).push([[79],{3079:(e,s,t)=>{t.r(s),t.d(s,{default:()=>R});var l=t(5043),a=t(579);const i=(0,l.createContext)({}),r=()=>(0,l.useContext)(i),n={urgent:"#c1121f",high:"#FFF200",normal:"#219ebc",low:"#8B8C89"},c={textSearch:"",selectPriority:"all",showCreate:!1,showEdit:!1,id:""},o=(e,s)=>{switch(s.type){case"SET_TEXT_SEARCH":return{...e,textSearch:s.payload};case"SET_PRIORITY":return{...e,selectPriority:s.payload};case"SHOW_CREATE":return{...e,showCreate:!0};case"CLOSE_CREATE":return{...e,showCreate:!1};case"SHOW_EDIT":return{...e,showEdit:!0,id:s.payload};case"CLOSE_EDIT":return{...e,showEdit:!1,id:""};default:return e}},d=e=>{let{children:s}=e;const[t,r]=(0,l.useState)(new Date),[d,h]=(0,l.useReducer)(o,c),u=(0,l.useMemo)((()=>({...d,setTextSearch:e=>h({type:"SET_TEXT_SEARCH",payload:e}),setSelectPriority:e=>h({type:"SET_PRIORITY",payload:e}),handleShowCreate:()=>h({type:"SHOW_CREATE"}),handleCloseCreate:()=>h({type:"CLOSE_CREATE"}),handleShowEdit:e=>h({type:"SHOW_EDIT",payload:e}),handleCloseEdit:()=>h({type:"CLOSE_EDIT"}),priorityFlagColor:n,date:t,setDate:r})),[d,t,r]);return(0,a.jsx)(i.Provider,{value:u,children:s})};var h=t(5475),u=t(1462);const p=function(){const{setTextSearch:e,setSelectPriority:s}=r();return(0,a.jsxs)("div",{className:"section-aside col-3",children:[(0,a.jsxs)("label",{className:"search",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search\u2026",onChange:s=>(s=>{e(s.target.value)})(s)}),(0,a.jsx)(u.YQq,{})]}),(0,a.jsx)("div",{className:"cards-links",children:(0,a.jsx)(h.k2,{to:"/",className:e=>{let{isActive:s,isPending:t}=e;return t?"pending":s?"active":""},children:"All Tasks"})}),(0,a.jsx)("div",{className:"cards-links",children:(0,a.jsx)(h.k2,{to:"/daily_tasks",className:e=>{let{isActive:s,isPending:t}=e;return t?"pending":s?"active":""},children:"Daily Tasks"})}),(0,a.jsx)("div",{className:"cards-links",children:(0,a.jsx)(h.k2,{to:"/all_tasks_completed",className:e=>{let{isActive:s,isPending:t}=e;return t?"pending":s?"active":""},children:"All Completed Tasks"})}),(0,a.jsx)("div",{className:"cards-links",children:(0,a.jsx)(h.k2,{to:"/daily_tasks_completed",className:e=>{let{isActive:s,isPending:t}=e;return t?"pending":s?"active":""},children:"Completed Daily Tasks"})}),(0,a.jsxs)("div",{className:"cards-links select-priority",children:[(0,a.jsx)("h6",{children:"select priority"}),(0,a.jsxs)("select",{name:"priority",onChange:e=>{s(e.target.value)},children:[(0,a.jsx)("option",{value:"all",defaultValue:!0,children:"all"}),(0,a.jsx)("option",{value:"urgent",children:"urgent"}),(0,a.jsx)("option",{value:"high",children:"high"}),(0,a.jsx)("option",{value:"normal",children:"normal"}),(0,a.jsx)("option",{value:"low",children:"low"})]})]})]})},x=e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"row",children:s})};var j=t(3216),m=t(5472),y=t(791),k=t(5016),v=t(7417),C=t(423),A=t(184);const g=e=>{let{count:s,titleHeader:t,type:i}=e;const{handleShowCreate:n,showCreate:c,date:o,setDate:d}=r(),[h,u]=(0,l.useState)(0),p=(0,l.useCallback)((()=>{u((e=>e+1))}),[]),x=(0,l.useCallback)((()=>{u((e=>e-1))}),[]);return(0,l.useEffect)((()=>{d((e=>new Date(Date.now()+24*h*60*60*1e3)))}),[h,d]),(0,a.jsxs)("div",{className:"section-header",children:[(0,a.jsx)("h1",{children:t}),"daily_tasks"===i||"completed_daily_tasks"===i?(0,a.jsxs)("div",{className:"date",children:[(0,a.jsx)("button",{onClick:x,children:(0,a.jsx)(A.QVr,{})}),o.toISOString().substring(0,10),(0,a.jsx)("button",{onClick:p,children:(0,a.jsx)(A.Z0P,{})})]}):null,(0,a.jsxs)("div",{className:"tools",children:[(0,a.jsx)("div",{className:"selections",children:(0,a.jsxs)("div",{className:"clear-select",children:["count tasks: ",s]})}),"all_tasks"===i||"daily_tasks"===i?(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:n,children:(0,a.jsx)(C.TJ8,{})}),c?(0,a.jsx)(P,{}):null]}):null]})]})},_=e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"sectoin-tasks",children:s})};var S=t(6720),w=t(3002),N=t(397);const b=e=>{let{completed:s,id:t,title:l,description:i,priority:n,date:c}=e;const{compleatedTask:o,deleteTask:d}=(0,k.A)(),{priorityFlagColor:h,handleShowEdit:u}=r(),p=(e,s)=>{window.confirm(s?"Do you want to return this task to your uncomplete tasks list?":"Did you complete this task?")&&o(e,s)};return(0,a.jsxs)("div",{className:"sectoin-task",children:[s?(0,a.jsx)(N.Ohx,{className:"task-completed",onClick:()=>p(t,s)}):(0,a.jsx)(A.Hcz,{className:"task-completed",onClick:()=>p(t,s)}),(0,a.jsxs)("div",{className:"wrapper-section-task",children:[(0,a.jsxs)("div",{className:"wrapper-task-content",children:[(0,a.jsxs)("div",{className:"task-content",children:[(0,a.jsx)("h3",{className:"task-title",children:l}),(0,a.jsx)("h4",{className:"task-description",children:i}),(0,a.jsx)("h4",{children:c})]}),(0,a.jsx)(w.PjS,{style:{color:h[n],width:"26px",height:"26px"}})]}),(0,a.jsxs)("div",{className:"task-option",children:[s?null:(0,a.jsx)("button",{className:"btn btn-primary",onClick:()=>u(t),children:"Edit"}),(0,a.jsx)("button",{className:"task-delete",onClick:()=>(e=>{window.confirm("Did you Delete this task?")&&d(e)})(t),children:(0,a.jsx)(S.b6i,{})})]})]})]})};var E=t(5284),T=t(3519),f=t(2462),D=t(1072),F=t(4282);const P=()=>{const{addTask:e}=(0,k.A)(),{showCreate:s,handleCloseCreate:t,priorityFlagColor:i}=r();var n=new Date;n.setDate(n.getDate());const c={title:"",description:"",priority:"urgent",date:n.toISOString().substring(0,10)},[o,d]=(0,l.useReducer)(((e,s)=>"input"===s.type?{...e,[s.field]:s.value}:e),c),h=e=>{d({type:"input",field:e.target.name,value:e.target.value})};return(0,a.jsxs)(E.A,{show:s,onHide:t,size:"lg",children:[(0,a.jsx)(E.A.Header,{closeButton:!0,children:(0,a.jsx)(E.A.Title,{children:"Create Task"})}),(0,a.jsx)(E.A.Body,{children:(0,a.jsx)(T.A,{children:(0,a.jsxs)(f.A,{onSubmit:async s=>{s.preventDefault(),await e(o),t()},children:[(0,a.jsxs)(D.A,{children:[(0,a.jsxs)("div",{className:"col-md-8 col-12",children:[(0,a.jsxs)(f.A.Group,{className:"mb-3",children:[(0,a.jsx)(f.A.Label,{htmlFor:"title_of_task",children:"Title of task"}),(0,a.jsx)(f.A.Control,{type:"text",name:"title",onChange:h,placeholder:"title",required:!0,autoFocus:!0})]}),(0,a.jsxs)(f.A.Group,{className:"mb-4",children:[(0,a.jsx)(f.A.Label,{htmlFor:"description_of_task",children:"Description of task"}),(0,a.jsx)(f.A.Control,{as:"textarea",name:"description",onChange:e=>h(e),rows:3})]}),(0,a.jsxs)(f.A.Group,{className:"mb-3",children:[(0,a.jsx)(f.A.Label,{htmlFor:"select_priority",children:"Select Priority"}),(0,a.jsxs)("div",{className:"select-priority",children:[(0,a.jsxs)(f.A.Select,{size:"sm",onChange:h,name:"priority",required:!0,children:[(0,a.jsx)("option",{value:"urgent",children:"urgent"}),(0,a.jsx)("option",{value:"high",children:"high"}),(0,a.jsx)("option",{value:"normal",children:"normal"}),(0,a.jsx)("option",{value:"low",children:"low"})]}),(0,a.jsx)("span",{children:(0,a.jsx)(w.PjS,{style:{color:i[o.priority]}})})]})]})]}),(0,a.jsx)("div",{className:"col-md-4 col-12",children:(0,a.jsxs)(f.A.Group,{className:"select-date mb-3",children:[(0,a.jsx)(f.A.Label,{htmlFor:"select_date",children:"Select Date:"}),(0,a.jsx)(f.A.Control,{type:"date",name:"date",onChange:h,required:!0,defaultValue:o.date})]})})]}),(0,a.jsxs)(E.A.Footer,{children:[(0,a.jsx)(F.A,{variant:"secondary",onClick:t,children:"Close"}),(0,a.jsx)(F.A,{variant:"primary",type:"submit",children:"Add"})]})]})})})]})},L=()=>{const[e,s]=(0,l.useState)(!0),{updateTask:t,getDataTask:i}=(0,k.A)(),{id:n,showEdit:c,handleCloseEdit:o,priorityFlagColor:d}=r(),[h,u]=(0,l.useReducer)(((e,s)=>{switch(s.type){case"update":return{...e,[s.field]:s.value};case"setForm":return{...e,...s.payload};default:return e}}),{title:"",description:"",priority:"",date:""});(0,l.useEffect)((()=>{s(!0);(async()=>{try{const e=await i(n);u({type:"setForm",payload:e.data()}),s(!1)}catch(e){console.error("Error fetching data:",e),s(!1)}})()}),[n,i]);const p=e=>{u({type:"update",field:e.target.name,value:e.target.value})};return e?null:(0,a.jsxs)(E.A,{show:c,onHide:o,size:"lg",children:[(0,a.jsx)(E.A.Header,{closeButton:!0,children:(0,a.jsx)(E.A.Title,{children:"Edit Task"})}),(0,a.jsx)(E.A.Body,{children:(0,a.jsx)(T.A,{children:(0,a.jsxs)(f.A,{onSubmit:async e=>{e.preventDefault(),await t(n,h),o()},children:[(0,a.jsxs)(D.A,{children:[(0,a.jsxs)("div",{className:"col-md-8 col-12",children:[(0,a.jsxs)(f.A.Group,{className:"mb-3",children:[(0,a.jsx)(f.A.Label,{htmlFor:"title_of_task",children:"Title of task"}),(0,a.jsx)(f.A.Control,{type:"text",name:"title",placeholder:"title",required:!0,autoFocus:!0,value:h.title,onChange:p})]}),(0,a.jsxs)(f.A.Group,{className:"mb-4",children:[(0,a.jsx)(f.A.Label,{htmlFor:"description_of_task",children:"Description of task"}),(0,a.jsx)(f.A.Control,{as:"textarea",name:"description",rows:3,value:h.description,onChange:p})]}),(0,a.jsxs)(f.A.Group,{className:"mb-3",children:[(0,a.jsx)(f.A.Label,{htmlFor:"select_priority",children:"Select Priority"}),(0,a.jsxs)("div",{className:"select-priority",children:[(0,a.jsxs)(f.A.Select,{size:"sm",name:"priority",required:!0,value:h.priority,onChange:p,children:[(0,a.jsx)("option",{value:"urgent",children:"urgent"}),(0,a.jsx)("option",{value:"high",children:"high"}),(0,a.jsx)("option",{value:"normal",children:"normal"}),(0,a.jsx)("option",{value:"low",children:"low"})]}),(0,a.jsx)("span",{children:(0,a.jsx)(w.PjS,{style:{color:d[h.priority]}})})]})]})]}),(0,a.jsx)("div",{className:"col-md-4 col-12",children:(0,a.jsxs)(f.A.Group,{className:"select-date mb-3",children:[(0,a.jsx)(f.A.Label,{htmlFor:"select_date",children:"Select Date:"}),(0,a.jsx)(f.A.Control,{type:"date",name:"date",value:h.date,onChange:p,required:!0})]})})]}),(0,a.jsxs)(E.A.Footer,{children:[(0,a.jsx)(F.A,{variant:"secondary",onClick:o,children:"Close"}),(0,a.jsx)(F.A,{variant:"success",type:"submit",children:"Edit"})]})]})})})]})},O=e=>{let{type:s,title:t}=e;const{currentUser:i}=(0,k.A)(),{textSearch:n,showEdit:c,date:o,selectPriority:d}=r(),[h,u]=(0,l.useState)([]),[p,x]=(0,l.useState)(!0),[j,C]=(0,l.useState)(null),A=(0,l.useMemo)((()=>({position:"absolute",top:"50%",left:"60%"})),[]),S=(0,l.useCallback)((async()=>{C(null);try{const e=(0,m.rJ)(y.db,"users/".concat(i.uid,"/tasks")),t=[];"all_tasks"===s||"daily_tasks"===s?t.push((0,m._M)("completed","==",!1)):t.push((0,m._M)("completed","==",!0)),"daily_tasks"!==s&&"completed_daily_tasks"!==s||t.push((0,m._M)("date","==",o.toISOString().substring(0,10))),"all"!==d&&t.push((0,m._M)("priority","==",d));const l=(0,m.P)(e,...t),a=(await(0,m.GG)(l)).docs.map((e=>({...e.data(),id:e.id})));u(a)}catch(j){C("Failed to load tasks")}finally{x(!1)}}),[i,s,o,d]);(0,l.useEffect)((()=>{S()}),[S]);const w=(0,l.useMemo)((()=>h.filter((e=>e.title.toLowerCase().includes(n.toLowerCase())))),[h,n]);return p?(0,a.jsx)(v.A,{style:A,animation:"border",variant:"primary"}):j?(0,a.jsx)("div",{className:"error-message",children:j}):(0,a.jsxs)("div",{className:"col-9",children:[(0,a.jsx)(g,{count:w.length,titleHeader:t,type:s}),(0,a.jsx)(_,{children:w.map((e=>(0,a.jsx)(b,{id:e.id,completed:e.completed,title:e.title,description:e.description,priority:e.priority,date:e.date},e.id)))}),c&&(0,a.jsx)(L,{})]})},H=()=>(0,a.jsxs)(j.BV,{children:[(0,a.jsx)(j.qh,{path:"/",element:(0,a.jsx)(O,{type:"all_tasks",title:"All Tasks"})}),(0,a.jsx)(j.qh,{path:"/daily_tasks",element:(0,a.jsx)(O,{type:"daily_tasks",title:"Daily Tasks"})}),(0,a.jsx)(j.qh,{path:"/all_tasks_completed",element:(0,a.jsx)(O,{type:"completed_all_tasks",title:"All Completed Tasks"})}),(0,a.jsx)(j.qh,{path:"/daily_tasks_completed",element:(0,a.jsx)(O,{type:"completed_daily_tasks",title:"Completed Daily Tasks"})})]}),R=()=>(0,a.jsx)(d,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(p,{}),(0,a.jsx)(H,{})]})})}}]);
//# sourceMappingURL=79.66fda7e8.chunk.js.map